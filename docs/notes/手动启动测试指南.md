# 🚀 手动启动测试指南

由于PowerShell编码问题，请按照以下步骤手动启动测试网：

## 方法1: 使用Windows命令提示符（推荐）

### 步骤1: 打开命令提示符
1. 按 `Win + R`
2. 输入 `cmd`
3. 按回车

### 步骤2: 切换到项目目录
```cmd
cd /d C:\Users\plant\Desktop\Rust区块链\Rust-Blockchain-Secure-Wallet
```

### 步骤3: 停止旧进程
```cmd
netstat -ano | findstr :8080
```
如果看到进程，记录PID，然后：
```cmd
taskkill /F /PID [进程ID]
```

### 步骤4: 编译项目
```cmd
cargo build --release
```

### 步骤5: 启动测试网服务器
```cmd
start_testnet.sh
```

### 步骤6: 在新窗口测试API
打开新的命令提示符窗口：
```cmd
cd /d C:\Users\plant\Desktop\Rust区块链\Rust-Blockchain-Secure-Wallet
```

测试健康检查：
```cmd
curl http://localhost:8080/health
```

创建测试钱包：
```cmd
curl -X POST http://localhost:8080/wallets -H "Authorization: Bearer test-api-key-12345" -H "Content-Type: application/json" -d "{\"name\": \"test_wallet_1\", \"description\": \"测试钱包1\"}"
```

查询钱包列表：
```cmd
curl -H "Authorization: Bearer test-api-key-12345" http://localhost:8080/wallets
```

## 方法2: 使用Git Bash

### 步骤1: 打开Git Bash
1. 右键点击项目文件夹
2. 选择 "Git Bash Here"

### 步骤2: 运行启动脚本
```bash
./start_testnet.sh
```

### 步骤3: 在新窗口测试
打开新的Git Bash窗口：
```bash
cd "C:\Users\plant\Desktop\Rust区块链\Rust-Blockchain-Secure-Wallet"
curl http://localhost:8080/health
```

## 方法3: 双击批处理文件

直接双击以下文件：
- `start_testnet_windows.bat`
- `manual_start_test.bat`
- `test_server_status.bat`

## 验证测试成功

### 健康检查
```bash
curl http://localhost:8080/health
```
应该返回：`{"status":"ok"}` 或 `{"status":"healthy"}`

### 创建钱包
```bash
curl -X POST http://localhost:8080/wallets \
  -H "Authorization: Bearer test-api-key-12345" \
  -H "Content-Type: application/json" \
  -d '{"name": "test_wallet", "description": "测试钱包"}'
```
应该返回包含钱包地址的JSON

### 查询余额
```bash
curl -H "Authorization: Bearer test-api-key-12345" \
  http://localhost:8080/wallets/[钱包地址]/balance
```
应该返回余额信息（Day 2已修复）

## 自动化测试

### 启动1周自动化测试
```bash
./week_automated_test.sh
```

### 测试配置
- 测试间隔：30分钟
- 测试时长：7天
- 日志目录：`logs/week_test/`

## 故障排除

### 端口被占用
```cmd
netstat -ano | findstr :8080
taskkill /F /PID [进程ID]
```

### 编译失败
```cmd
cargo clean
cargo build --release
```

### API无响应
检查服务器日志，确保服务器正在运行

## 成功标志

✅ 服务器在8080端口运行
✅ 健康检查返回正常状态
✅ 可以创建钱包
✅ 可以查询余额（Day 2修复）
✅ 可以查询交易历史

---

**现在请按照上述步骤手动启动测试网！**
