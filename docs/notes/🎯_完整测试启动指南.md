# 🎯 完整测试启动指南 - Day 2

## 📊 当前状态分析

从你的测试结果看：
- ✅ 服务器启动成功（所有区块链网络连接正常）
- ✅ Day 2修复生效（区块链配置正确加载）
- ❌ API调用无响应（可能是服务器未完全启动或端口问题）

## 🚀 立即解决方案

### 方法1: 在Git Bash中完整测试

```bash
# 1. 切换到项目目录
cd Rust-Blockchain-Secure-Wallet

# 2. 检查服务器是否在运行
curl http://localhost:8888/health

# 3. 如果无响应，重新启动服务器
pkill -f hot_wallet 2>/dev/null || true
sleep 2
cargo run --bin hot_wallet

# 4. 等待服务器启动（看到 "Server listening on 127.0.0.1:8888"）

# 5. 在新窗口测试API
curl http://localhost:8888/health

# 6. 创建测试钱包
curl -X POST http://localhost:8888/wallets \
  -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  -H "Content-Type: application/json" \
  -d '{"name": "test_wallet", "description": "测试钱包"}'

# 7. 查询钱包列表
curl -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  http://localhost:8888/wallets
```

### 方法2: 使用脚本启动

```bash
# 使用简单启动脚本
chmod +x 简单启动测试.sh
./简单启动测试.sh

# 或者使用完整启动脚本
chmod +x 启动并测试.sh
./启动并测试.sh
```

## 🧪 测试验证步骤

### Step 1: 健康检查
```bash
curl http://localhost:8888/health
```
**预期结果**: `{"status":"ok"}` 或 `{"status":"healthy"}`

### Step 2: 创建钱包
```bash
curl -X POST http://localhost:8888/wallets \
  -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  -H "Content-Type: application/json" \
  -d '{"name": "test_wallet", "description": "测试钱包"}'
```
**预期结果**: 包含钱包地址的JSON响应

### Step 3: 查询余额（Day 2修复验证）
```bash
# 先获取钱包地址，然后查询余额
curl -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  http://localhost:8888/wallets/[钱包地址]/balance
```
**预期结果**: 余额信息或错误信息（不再是空响应）

### Step 4: 查询交易历史
```bash
curl -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  http://localhost:8888/wallets/[钱包地址]/transactions
```

### Step 5: 查询网络状态
```bash
curl -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  http://localhost:8888/network/status
```

## 🤖 启动1周自动化测试

### 方法1: 使用自动化测试脚本
```bash
chmod +x week_automated_test.sh
./week_automated_test.sh
```

### 方法2: 后台运行自动化测试
```bash
nohup ./week_automated_test.sh > automated_test.log 2>&1 &
```

## 📊 自动化测试配置

- **测试间隔**: 30分钟
- **测试时长**: 7天
- **测试内容**:
  - 健康检查
  - 钱包创建和管理
  - 余额查询（Day 2修复验证）
  - 交易历史查询
  - 网络状态检查
- **日志目录**: `logs/week_test/`

## 🔧 故障排除

### 问题1: 端口被占用
```bash
netstat -ano | grep :8888
taskkill //F //PID [进程ID]
```

### 问题2: 服务器启动失败
```bash
# 检查编译错误
cargo build --bin hot_wallet

# 检查环境变量
cat .env.testnet.local
```

### 问题3: API无响应
```bash
# 检查服务器日志
tail -f server.log

# 检查服务器状态
curl -v http://localhost:8888/health
```

## 🎉 成功标志

- ✅ 服务器在8888端口运行
- ✅ 健康检查返回正常状态
- ✅ 可以创建钱包
- ✅ 余额查询正常（Day 2修复生效）
- ✅ 自动化测试开始运行

## 📝 下一步

1. **完成API测试验证**
2. **启动1周自动化测试**
3. **监控测试日志**
4. **分析测试结果**
5. **准备生产环境部署**

---

**现在请按照上述步骤操作，告诉我测试结果！**
