# 🎯 完整启动测试指南 - Day 2

## 📊 当前问题分析

- ❌ 端口8888被其他程序占用（进程ID: 15152）
- ❌ 返回404错误，说明不是我们的钱包服务器
- ✅ 自动化测试脚本已修复（端口和API密钥）

## 🚀 立即解决方案

### Step 1: 清理端口并启动服务器

在Git Bash中运行：
```bash
cd Rust-Blockchain-Secure-Wallet

# 方法1: 使用清理脚本
chmod +x 清理端口并启动服务器.sh
./清理端口并启动服务器.sh

# 方法2: 手动操作
taskkill //F //PID 15152
sleep 3
cargo run --bin hot_wallet
```

### Step 2: 等待服务器启动

看到以下信息表示启动成功：
```
Server listening on 127.0.0.1:8888
```

### Step 3: 在新窗口验证服务器

```bash
cd Rust-Blockchain-Secure-Wallet

# 健康检查
curl http://localhost:8888/health

# 应该返回: {"status":"ok"} 或 {"status":"healthy"}
```

### Step 4: 测试Day 2修复

```bash
# 创建测试钱包
curl -X POST http://localhost:8888/wallets \
  -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  -H "Content-Type: application/json" \
  -d '{"name": "day2_test", "description": "Day2测试"}'

# 查询余额（验证Day 2修复）
curl -H "Authorization: Bearer testnet_api_key_117ca14556c34271" \
  http://localhost:8888/wallets/[钱包地址]/balance
```

### Step 5: 启动1周自动化测试

```bash
chmod +x week_automated_test.sh
./week_automated_test.sh
```

## 📊 预期结果

### 服务器启动成功：
- ✅ 看到 "Server listening on 127.0.0.1:8888"
- ✅ 所有区块链网络连接成功
- ✅ 数据库初始化成功

### API测试成功：
- ✅ 健康检查返回正常状态
- ✅ 钱包创建成功
- ✅ 余额查询正常（Day 2修复生效）

### 自动化测试成功：
- ✅ 所有测试通过
- ✅ 测试间隔30分钟
- ✅ 持续运行7天

## 🔧 故障排除

### 问题1: 端口仍被占用
```bash
# 查看占用端口的进程
netstat -ano | grep :8888

# 强制停止所有占用端口的进程
for pid in $(netstat -ano | grep ":8888" | awk '{print $5}' | sort -u); do
    taskkill //F //PID $pid 2>/dev/null || true
done
```

### 问题2: 服务器启动失败
```bash
# 检查编译错误
cargo build --bin hot_wallet

# 检查环境变量
cat .env.testnet.local
```

### 问题3: API返回404
- 确保服务器完全启动
- 检查端口是否正确（8888）
- 验证路由配置

## 🎉 成功标志

- ✅ 服务器在8888端口运行
- ✅ 健康检查返回正常状态
- ✅ 钱包创建成功
- ✅ 余额查询正常（Day 2修复生效）
- ✅ 自动化测试开始运行

## 📝 下一步

1. **完成服务器启动**
2. **验证Day 2修复效果**
3. **启动1周自动化测试**
4. **监控测试日志**
5. **准备生产环境部署**

---

**现在请运行 `./清理端口并启动服务器.sh` 来启动正确的服务器！**
