# ğŸ§ª åç«¯APIæµ‹è¯•æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: å¯åŠ¨åç«¯æœåŠ¡å™¨

```bash
cd "C:\Users\plant\Desktop\RuståŒºå—é“¾\Rust-Blockchain-Secure-Wallet"

# ä½¿ç”¨ä¸»èœå•å¯åŠ¨
bash wallet_tools.sh
# é€‰æ‹© "1. å¯åŠ¨æœåŠ¡å™¨"
```

æœåŠ¡å™¨ä¼šåœ¨ `http://localhost:8888` å¯åŠ¨

---

## ğŸ”‘ APIè®¤è¯ä¿¡æ¯

```
APIå¯†é’¥: testnet_api_key_51a69b550a2c4149
è®¤è¯æ–¹å¼: Authorizationå¤´éƒ¨(åŸå§‹å¯†é’¥,æ— Bearerå‰ç¼€)
```

---

## ğŸ“‹ APIç«¯ç‚¹æµ‹è¯•

### 1. å¥åº·æ£€æŸ¥

```bash
curl http://localhost:8888/api/health
```

**é¢„æœŸå“åº”:**
```json
{
  "status": "ok",
  "timestamp": "2025-10-25T...",
  "version": "0.1.0"
}
```

---

### 2. è·å–é’±åŒ…åˆ—è¡¨

```bash
curl -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  http://localhost:8888/api/wallets
```

**é¢„æœŸå“åº”:**
```json
[]
æˆ–
[
  {
    "id": "wallet_1",
    "name": "wallet_1",
    "quantum_safe": false
  }
]
```

---

### 3. åˆ›å»ºé’±åŒ…

```bash
curl -X POST http://localhost:8888/api/wallets \
  -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "test_wallet",
    "description": "æµ‹è¯•é’±åŒ…",
    "quantum_safe": false
  }'
```

**é¢„æœŸå“åº”:**
```json
{
  "id": "test_wallet",
  "name": "test_wallet",
  "quantum_safe": false
}
```

---

### 4. æŸ¥è¯¢ä½™é¢

```bash
curl -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  "http://localhost:8888/api/wallets/test_wallet/balance?network=eth"
```

**é¢„æœŸå“åº”:**
```json
{
  "balance": "0.000000000000000000",
  "network": "eth",
  "symbol": "ETH"
}
```

---

### 5. äº¤æ˜“å†å²

```bash
curl -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  http://localhost:8888/api/wallets/test_wallet/history
```

**é¢„æœŸå“åº”:**
```json
{
  "transactions": []
}
```

---

### 6. ç½‘ç»œçŠ¶æ€/æŒ‡æ ‡

```bash
curl -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  http://localhost:8888/api/metrics
```

**é¢„æœŸå“åº”:**
```
# HELP defi_hot_wallet_requests_total Total number of requests
# TYPE defi_hot_wallet_requests_total counter
defi_hot_wallet_requests_total 0
```

---

## ğŸ§ª è‡ªåŠ¨åŒ–æµ‹è¯•

### å¿«é€Ÿæµ‹è¯•(æ¨è)

```bash
bash quick_test.sh
```

**åŠŸèƒ½:**
- è‡ªåŠ¨å¯åŠ¨æœåŠ¡å™¨(å¦‚æœæœªè¿è¡Œ)
- æµ‹è¯•6ä¸ªAPIç«¯ç‚¹
- æ˜¾ç¤ºæˆåŠŸç‡

**è¾“å‡ºç¤ºä¾‹:**
```
[1] æµ‹è¯•: å¥åº·æ£€æŸ¥
    âœ… æˆåŠŸ

[2] æµ‹è¯•: é’±åŒ…åˆ—è¡¨
    âœ… æˆåŠŸ

...

ğŸ“Š æµ‹è¯•ç»“æœ
æ€»æµ‹è¯•æ•°: 6
æˆåŠŸ: 6 âœ…
å¤±è´¥: 0 âŒ
æˆåŠŸç‡: 100%
```

---

### é•¿æœŸç¨³å®šæ€§æµ‹è¯•

```bash
bash week_automated_test_final.sh
```

**é€‰æ‹©æµ‹è¯•æ¨¡å¼:**
1. å¿«é€Ÿæµ‹è¯• (5åˆ†é’Ÿé—´éš”, 1å°æ—¶) â­æ¨è
2. çŸ­æœŸæµ‹è¯• (10åˆ†é’Ÿé—´éš”, 6å°æ—¶)
3. ä¸­æœŸæµ‹è¯• (30åˆ†é’Ÿé—´éš”, 1å¤©)
4. é•¿æœŸæµ‹è¯• (1å°æ—¶é—´éš”, 3å¤©)
5. å®Œæ•´æµ‹è¯• (2å°æ—¶é—´éš”, 7å¤©)
6. è‡ªå®šä¹‰

---

## ğŸ”§ ä½¿ç”¨Postmanæµ‹è¯•

### å¯¼å…¥é…ç½®

åˆ›å»º `postman_collection.json`:

```json
{
  "info": {
    "name": "DeFiçƒ­é’±åŒ…API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "å¥åº·æ£€æŸ¥",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8888/api/health",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8888",
          "path": ["api", "health"]
        }
      }
    },
    {
      "name": "è·å–é’±åŒ…åˆ—è¡¨",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "testnet_api_key_51a69b550a2c4149",
            "type": "text"
          }
        ],
        "url": {
          "raw": "http://localhost:8888/api/wallets",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8888",
          "path": ["api", "wallets"]
        }
      }
    },
    {
      "name": "åˆ›å»ºé’±åŒ…",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "testnet_api_key_51a69b550a2c4149",
            "type": "text"
          },
          {
            "key": "Content-Type",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"name\": \"test_wallet\",\n  \"description\": \"æµ‹è¯•é’±åŒ…\",\n  \"quantum_safe\": false\n}"
        },
        "url": {
          "raw": "http://localhost:8888/api/wallets",
          "protocol": "http",
          "host": ["localhost"],
          "port": "8888",
          "path": ["api", "wallets"]
        }
      }
    }
  ]
}
```

---

## ğŸš¨ å¸¸è§é”™è¯¯å¤„ç†

### é”™è¯¯1: Unauthorized (401)

**é”™è¯¯å“åº”:**
```json
{
  "error": "Unauthorized",
  "code": "AUTH_FAILED"
}
```

**åŸå› :** APIå¯†é’¥é”™è¯¯æˆ–ç¼ºå¤±

**è§£å†³:**
```bash
# ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„APIå¯†é’¥
curl -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  http://localhost:8888/api/wallets
```

---

### é”™è¯¯2: Connection Refused

**é”™è¯¯ä¿¡æ¯:**
```
curl: (7) Failed to connect to localhost port 8888
```

**åŸå› :** æœåŠ¡å™¨æœªå¯åŠ¨

**è§£å†³:**
```bash
bash wallet_tools.sh
# é€‰æ‹© "1. å¯åŠ¨æœåŠ¡å™¨"
```

---

### é”™è¯¯3: CORS Error

**é”™è¯¯ä¿¡æ¯:**
```
Access-Control-Allow-Origin header is missing
```

**åŸå› :** CORSé…ç½®é—®é¢˜

**è§£å†³:**
- åç«¯å·²é…ç½®CORSå…è®¸ `http://localhost:3000`
- å¦‚æœå‰ç«¯åœ¨å…¶ä»–ç«¯å£,ä¿®æ”¹ç¯å¢ƒå˜é‡:
```bash
export CORS_ALLOW_ORIGIN="http://localhost:3001"
bash restart_server.sh
```

---

## ğŸ“Š æ€§èƒ½æµ‹è¯•

### ä½¿ç”¨Apache Bench

```bash
# æµ‹è¯•å¥åº·æ£€æŸ¥ç«¯ç‚¹
ab -n 1000 -c 10 http://localhost:8888/api/health

# æµ‹è¯•é’±åŒ…åˆ—è¡¨(éœ€è¦APIå¯†é’¥)
ab -n 1000 -c 10 \
  -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  http://localhost:8888/api/wallets
```

---

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

```bash
bash view_server_logs.sh
# é€‰æ‹© "5. å®æ—¶è·Ÿè¸ªæ—¥å¿—"
```

### 2. æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€

```bash
bash wallet_tools.sh
# é€‰æ‹© "4. æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€"
```

### 3. è¯¦ç»†è¯·æ±‚æ—¥å¿—

```bash
# ä½¿ç”¨curlçš„verboseæ¨¡å¼
curl -v -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  http://localhost:8888/api/wallets
```

---

## ğŸ“ æµ‹è¯•æ£€æŸ¥æ¸…å•

æµ‹è¯•å‰ç¡®è®¤:

- [ ] æœåŠ¡å™¨åœ¨8888ç«¯å£è¿è¡Œ
- [ ] å¯ä»¥è®¿é—®å¥åº·æ£€æŸ¥ç«¯ç‚¹
- [ ] APIå¯†é’¥æ­£ç¡®: `testnet_api_key_51a69b550a2c4149`
- [ ] æ•°æ®åº“æ–‡ä»¶å­˜åœ¨: `./data/testnet_wallet.db`
- [ ] æ—¥å¿—æ­£å¸¸è¾“å‡º

---

## ğŸ¯ å®Œæ•´æµ‹è¯•æµç¨‹

```bash
# 1. å¯åŠ¨æœåŠ¡å™¨
bash wallet_tools.sh
# é€‰æ‹© "1. å¯åŠ¨æœåŠ¡å™¨"

# 2. ç­‰å¾…15ç§’

# 3. è¿è¡Œå¿«é€Ÿæµ‹è¯•
bash quick_test.sh

# 4. æŸ¥çœ‹ç»“æœ
# åº”è¯¥çœ‹åˆ° 6/6 æµ‹è¯•é€šè¿‡

# 5. æŸ¥çœ‹æ—¥å¿—
bash view_server_logs.sh
```

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- `æœåŠ¡å™¨é…ç½®ä¿¡æ¯.md` - å®Œæ•´é…ç½®è¯´æ˜
- `CORSé…ç½®è¯´æ˜.md` - CORSè¯¦ç»†é…ç½®
- `startup-and-testing-guide.md` - å¯åŠ¨æŒ‡å—
- `å‘½ä»¤é€ŸæŸ¥è¡¨.md` - å¿«é€Ÿå‘½ä»¤å‚è€ƒ

---

**å¼€å§‹æµ‹è¯•åç«¯API!** ğŸš€

