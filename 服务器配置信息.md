# 🔧 服务器配置信息

## 📋 基本信息

### 服务器地址
```
http://localhost:8888
```

### API密钥
```
testnet_api_key_51a69b550a2c4149
```

### 端口
```
8888
```

---

## 🔑 完整环境变量

```bash
# 加密密钥 (测试环境)
WALLET_ENC_KEY="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="

# API密钥
API_KEY="testnet_api_key_51a69b550a2c4149"

# CORS配置
CORS_ALLOW_ORIGIN="http://localhost:3000,http://localhost:3010"

# 数据库路径
DATABASE_URL="sqlite://./data/testnet_wallet.db?mode=rwc"

# 日志级别
RUST_LOG="info"

# 服务器主机
SERVER_HOST="127.0.0.1"

# 服务器端口
SERVER_PORT="8888"

# 测试环境标志
TEST_SKIP_DECRYPT="1"
ALLOW_BRIDGE_MOCKS="1"
```

---

## 🌐 API端点

### 基础URL
```
http://localhost:8888/api
```

### 主要端点

#### 1. 健康检查
```
GET http://localhost:8888/api/health
```

#### 2. 钱包管理
```
# 获取钱包列表
GET http://localhost:8888/api/wallets
Header: Authorization: testnet_api_key_51a69b550a2c4149

# 创建钱包
POST http://localhost:8888/api/wallets
Header: Authorization: testnet_api_key_51a69b550a2c4149
Header: Content-Type: application/json
Body: {
  "name": "wallet_name",
  "description": "描述",
  "quantum_safe": false
}
```

#### 3. 余额查询
```
GET http://localhost:8888/api/wallets/{wallet_name}/balance?network=eth
Header: Authorization: testnet_api_key_51a69b550a2c4149
```

#### 4. 交易历史
```
GET http://localhost:8888/api/wallets/{wallet_name}/history
Header: Authorization: testnet_api_key_51a69b550a2c4149
```

#### 5. 网络状态
```
GET http://localhost:8888/api/metrics
Header: Authorization: testnet_api_key_51a69b550a2c4149
```

---

## 🔐 API密钥使用方法

### ⚠️ 重要提示
**使用原始API密钥,不要加Bearer前缀!**

### ✅ 正确方式
```bash
# curl
curl -H "Authorization: testnet_api_key_51a69b550a2c4149" http://localhost:8888/api/wallets

# PowerShell
Invoke-RestMethod http://localhost:8888/api/wallets -Headers @{ Authorization = 'testnet_api_key_51a69b550a2c4149' }
```

### ❌ 错误方式
```bash
# 不要使用Bearer前缀!
curl -H "Authorization: Bearer testnet_api_key_51a69b550a2c4149" http://localhost:8888/api/wallets
```

---

## 🗄️ 数据库信息

### 数据库类型
```
SQLite
```

### 数据库路径
```
./data/testnet_wallet.db
```

### 数据库模式
```
读写创建模式 (mode=rwc)
```

---

## 📂 日志文件位置

### 服务器日志
```
logs/server_YYYYMMDD_HHMMSS.log
```

### 测试日志
```
logs/week_test/automated_test_YYYYMMDD_HHMMSS.log
```

---

## 🌍 支持的区块链网络

### 主网
- Ethereum (eth)
- Solana (sol)
- BSC (bsc)
- Polygon (polygon)

### 测试网
- Sepolia (sepolia)
- BSC Testnet (bsc-testnet)

---

## 🔧 快速测试命令

### 1. 测试健康检查
```bash
curl http://localhost:8888/api/health
```

### 2. 测试API密钥
```bash
curl -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  http://localhost:8888/api/wallets
```

### 3. 创建测试钱包
```bash
curl -X POST http://localhost:8888/api/wallets \
  -H "Authorization: testnet_api_key_51a69b550a2c4149" \
  -H "Content-Type: application/json" \
  -d '{"name":"test_wallet","description":"测试钱包","quantum_safe":false}'
```

---

## 📊 预期响应示例

### 健康检查
```json
{
  "status": "ok",
  "timestamp": "2025-10-25T03:40:32.579791300+00:00",
  "version": "0.1.0"
}
```

### 钱包列表
```json
[
  {
    "id": "wallet_1",
    "name": "wallet_1",
    "quantum_safe": false
  }
]
```

### 创建钱包
```json
{
  "id": "test_wallet",
  "name": "test_wallet",
  "quantum_safe": false
}
```

### 余额查询
```json
{
  "balance": "0.000000000000000000",
  "network": "eth",
  "symbol": "ETH"
}
```

---

## 🚨 安全提示

### ⚠️ 测试环境配置
当前配置为**测试环境**:
- `WALLET_ENC_KEY` 使用全零密钥 (仅测试用)
- `TEST_SKIP_DECRYPT="1"` 跳过解密验证
- `ALLOW_BRIDGE_MOCKS="1"` 允许模拟跨链桥

### 🔒 生产环境注意事项
如果部署到生产环境,必须:
1. ✅ 生成真实的随机 `WALLET_ENC_KEY`
2. ✅ 移除 `TEST_SKIP_DECRYPT` 环境变量
3. ✅ 移除 `ALLOW_BRIDGE_MOCKS` 环境变量
4. ✅ 更换 API 密钥
5. ✅ 启用 HTTPS
6. ✅ 配置防火墙规则

---

## 📞 快速参考

### 服务器地址
```
http://localhost:8888
```

### API密钥
```
testnet_api_key_51a69b550a2c4149
```

### 启动服务器
```bash
bash wallet_tools.sh
# 选择 "1. 启动服务器"
```

### 测试API
```bash
bash quick_test.sh
```

---

**保存此文件以便随时查阅!** 📌

